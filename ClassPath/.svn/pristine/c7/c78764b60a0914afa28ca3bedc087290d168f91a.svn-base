<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.pfcp.student.lecture.grade.mapper.StudentGradeMapper">
	<resultMap type="LectureEnrVO" id="lectureEnrMap" autoMapping="true">
	    <id property="enrollNo" column="ENROLL_NO"/>
	    
	    <association property="subject" javaType="SubjectVO" autoMapping="true">
	        <id property="subjectCode" column="SUBJECT_CODE"/>
	    </association>
	    
	    <association property="semester" javaType="kr.or.ddit.pfcp.common.vo.SemesterVO" autoMapping="true">
	    	<id property="semesterNo" column="SEMESTER_NO"/>
	    </association>
	</resultMap>

	<select id="selectStudentGradeList" resultMap="lectureEnrMap">
		    SELECT E.SEMESTER_NO
		    	   , E.SEMESTER_NAME
		           , A.SUBJECT_NAME
		           , A.CREDIT
		           , D.GRADE
		      FROM SUBJECT A
		INNER JOIN LECTURE_REQ B ON A.SUBJECT_CODE=B.SUBJECT_CODE
		INNER JOIN LECTURE C ON B.REQ_NO=C.REQ_NO
		INNER JOIN LECTURE_ENR D ON C.LEC_NO=D.LEC_NO
		INNER JOIN SEMESTER E ON A.SEMESTER_NO=E.SEMESTER_NO
		     WHERE D.USER_NO=#{userNo}
		       AND D.EVAL_YN='Y'
		  ORDER BY E.SEMESTER_NAME DESC
	</select>
	
	<select id="selectSemesterList">
		SELECT SEMESTER_NO
		       , YEAR
		       , TERM
		       , SEMESTER_NAME
		       , SEMESTER_ACT
		  FROM SEMESTER
	</select>
</mapper>