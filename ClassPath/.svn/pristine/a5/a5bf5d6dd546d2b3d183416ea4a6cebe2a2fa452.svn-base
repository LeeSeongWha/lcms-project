<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
  <title>시설 예약 가능 시간 설정</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
<body class="bg-gray-100 text-gray-800">
  <div class="max-w-4xl mx-auto mt-12 p-6 bg-white rounded-2xl shadow">
    <h2 class="text-2xl font-bold text-center mb-8">시설 예약 가능 시간 설정</h2>

    <div class="text-center mb-6">
      <h3 id="facilityName" class="text-xl font-semibold text-blue-600">${facility.facilitName }: ${facility.location }</h3>
      <p id="facilityInfo" class="text-sm text-gray-500">${facility.facilityType } / ${facility.facilityMp }인 사용 가능</p>
    </div>


    <div class="border-t pt-6">
      <h3 class="text-lg font-semibold mb-4">설정된 예약 가능 시간</h3>
      <ul id="scheduleList" class="space-y-2">
        <!-- 설정된 시간 목록 -->
      </ul>
    </div>

    <div class="text-center mt-8">
      <button onclick="goBack()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg mr-2">목록으로</button>
      <button onclick="saveSchedule()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg">저장</button>
    </div>
  </div>

  <script>


    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('facilityName').textContent = `시설명: ${facilityData.name}`;
      document.getElementById('facilityInfo').textContent = `${facilityData.type} / ${facilityData.location}`;
      document.querySelectorAll('.day-btn').forEach(btn => {
        btn.classList.add('px-3', 'py-1.5', 'rounded-full', 'bg-white', 'border', 'hover:bg-blue-100');
        btn.addEventListener('click', () => selectDay(btn.dataset.day));
      });
      selectDay(selectedDay);
      renderScheduleList();
    });
    

    function renderScheduleList() {
        const list = document.getElementById('scheduleList');
        list.innerHTML = '';
        const days = ['월요일','화요일','수요일','목요일','금요일','토요일','일요일'];
        days.forEach(day => {
          (facilityData.availableTimes[day] || []).forEach(time => {
            const li = document.createElement('li');
            li.className = 'flex justify-between items-center bg-blue-50 px-4 py-2 rounded-lg';
            li.innerHTML = `${facilityRT.reservationDay} ${facilityRT.startHour} ~ ${parseInt(${facilityRT.startHour}) + 1}:00 <button onclick="removeSlot('${day}','${time}')" class="text-sm bg-red-500 text-white px-2 py-1 rounded">삭제</button>`;
            list.appendChild(li);
          });
        });
        if (list.innerHTML === '') list.innerHTML = '<li class="text-gray-500">등록된 예약 시간이 없습니다.</li>';
      }

    function removeSlot(day, time) {
      facilityData.availableTimes[day] = facilityData.availableTimes[day].filter(t => t !== time);
      if (facilityData.availableTimes[day].length === 0) delete facilityData.availableTimes[day];
      if (day === selectedDay) renderTimeSlots();
      renderScheduleList();
    }

    function goBack() {
      window.location.href = '/staff/facility/facilityList.do';
    }
  </script>
</body>
