package kr.or.ddit.pfcp.staff.program.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
@RequestMapping("/staff/program")
public class StaffProgramController {

	/**
	 * 프로그램 등록 form
	 * 
	 * @return
	 */
	@GetMapping("/form")
	public String programForm() {
		return "pfcp/staff/program/programForm";

	}

	/**
	 * 프로그램 등록
	 * 
	 * @return
	 */
	@PostMapping
	public String registerProgram() {
		return "redirect:/staff/program";
	}

	/**
	 * 프로그램 목록 조회
	 * @return
	 */
	@GetMapping
	public String listPrograms() {
		return "pfcp/staff/program/programList";
	}

	/**
	 * 프로그램 상세 조회
	 * @param id
	 * @return
	 */
	@GetMapping("/{id}")
	public String programDetail(@PathVariable String id) {
		return "pfcp/staff/program/programDetail";
	}

	/**
	 * 프로그램 수정
	 * @param id
	 * @return
	 */
	@PutMapping("/{id}")
	public String editProgram(@PathVariable String id) {
		return "redirect:/staff/program/" + id;
	}

	/**
	 * 프로그램 삭제
	 * @param id
	 * @return
	 */
	@DeleteMapping("/{id}")
	public String deleteProgram(@PathVariable String id) {
		return "redirect:/staff/program";
	}

	/**
	 * 신청자 관리
	 * @return
	 */
	@GetMapping("/applications")
	public String applicantList() {
		return "pfcp/staff/program/applicantList";
	}

	@PutMapping("/applications/{id}")
	public String processApplication(@PathVariable String id, @RequestParam String action) {
		return"rediret:/staff/program/applications";
	}

	@GetMapping("/approved")
	public String approvedList() {
		return "pfcp/staff/program/approvedList";
	}

	
	/**
	 * 비교과 종합 평가
	 * @param type
	 * @return
	 */
	@GetMapping("/evaluation")
	public String evaluation(@RequestParam String type) {
		switch (type) {
		case "satisfaction":
			return "pfcp/staff/program/satisfaction";
		case "instructor":
			return "pfcp/staff/program/instructorEvaluation";
		case "engagement":
			return "pfcp/staff/program/engagementEvaluation";
		case "competency":
			return "pfcp/staff/program/competencyEvaluation";
		default:
			return "pfcp/staff/program/evaluation";
		}
	}

	/**
	 * 피드백 관리
	 * @return
	 */
	@GetMapping("/feedback")
	public String feedbackList() {
		return "pfcp/staff/program/feedbackList";
	}

	@PostMapping("/feedback/apply")
	public String applyFeedbackToNext() {
		return "redirect:/staff/program/feedback";
	}

	/**
	 * 인증서발급
	 * @return
	 */
	@PostMapping("/certificate")
	public String issueCertificate() {
		return "redirect:/staff/program/feedback";
	}

	/**
	 * 학생관리통합
	 * @return
	 */
	@GetMapping("/students")
	public String participantList() {
		return "pfcp/staff/program/studentList";
	}

	@GetMapping("/students/{id}")
	public String studentDetail(@PathVariable String id) {
		return "pfcp/staff/program/studentDetail";
	}

	@PutMapping("/students/{id}/attendance")
	public String recordAttendance(@PathVariable String id) {
		return "redirect:/staff/program/students/ + id";
	}

}
