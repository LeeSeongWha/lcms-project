package kr.or.ddit.pfcp.common.service;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import kr.or.ddit.pfcp.common.mapper.VirtualClassroomMapper;
import kr.or.ddit.pfcp.common.vo.ChatMessageVO;
import kr.or.ddit.pfcp.common.vo.ClassroomParticipantVO;
import kr.or.ddit.pfcp.common.vo.OnlineSessionVO;
import kr.or.ddit.pfcp.common.vo.VirtualClassroomVO;

@Service
public class VirtualClassroomServiceImpl implements VirtualClassroomService {

  @Autowired
  private VirtualClassroomMapper mapper;

  public Integer createOnlineSession(OnlineSessionVO sessionVO) {
    mapper.insertOnlineSession(sessionVO);
    return sessionVO.getSessionNo();
  }

  public OnlineSessionVO getOnlineSession(Integer sessionNo) {
    return mapper.selectOnlineSession(sessionNo);
  }

  public Integer createClassroom(VirtualClassroomVO classroomVO) {
    mapper.insertClassroom(classroomVO);
    return classroomVO.getVcNo();
  }

  public VirtualClassroomVO getClassroom(Integer vcNo) {
    return mapper.selectClassroom(vcNo);
  }

  public Integer joinClassroom(ClassroomParticipantVO participantVO) {
    mapper.joinClassroom(participantVO);
    return participantVO.getParticipantNo();
  }

  public List<ClassroomParticipantVO> getParticipantList(Integer vcNo) {
    return mapper.selectParticipantList(vcNo);
  }

  public Integer saveChatMessage(ChatMessageVO chatMessageVO) {
    mapper.insertChatMessage(chatMessageVO);
    return chatMessageVO.getMessageNo();
  }

  public List<ChatMessageVO> getChatMessages(Integer vcNo) {
    return mapper.selectChatMessageList(vcNo);
  }

  public void deactivateClassroom(Integer vcNo) {
    mapper.deactivateClassroom(vcNo);
  }

  public void endSession(Integer sessionNo) {
    mapper.endSession(sessionNo);
  }

}
