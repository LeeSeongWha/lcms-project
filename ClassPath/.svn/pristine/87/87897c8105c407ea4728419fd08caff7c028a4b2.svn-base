<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="kr.or.ddit.pfcp.professor.lecture.mapper.ProfessorLectureMapper">

	<select id="selectLectureList" resultType="LectureReqVO" parameterType="String">
		 SELECT
		 	ROW_NUMBER() OVER (ORDER BY P.USER_NO) AS RNUM,
            LR.REQ_NO,
            LR.SUBJECT_CODE,
            LR.LEC_NAME,
            U.USER_NAME,
            S.SUBJECT_NAME, 
            LR.REQ_DATE,          
            LR.STATUS,
            LR.REJ_REASON
            
            
        FROM
            LECTURE_REQ LR
        JOIN
            SUBJECT S ON LR.SUBJECT_CODE = S.SUBJECT_CODE
        JOIN
            PROFESSOR P ON LR.USER_NO = P.USER_NO    
        JOIN
            TB_USER U ON P.USER_NO = U.USER_NO         
        LEFT JOIN                                    
            FILE_REF F ON LR.FILE_REF_NO = F.FILE_REF_NO
        WHERE
            LR.USER_NO = #{userNo}              
        ORDER BY
            LR.REQ_DATE DESC, LR.REQ_NO ASC
	</select>

	<select id="selectLecture">
		SELECT
		 	ROW_NUMBER() OVER (ORDER BY P.USER_NO) AS RNUM,
            LR.REQ_NO,
            LR.SUBJECT_CODE,
            LR.LEC_NAME,
            U.USER_NAME,
            S.SUBJECT_NAME, 
            LR.REQ_DATE,          
            LR.STATUS,
            LR.REJ_REASON
            
            
        FROM
            LECTURE_REQ LR
        JOIN
            SUBJECT S ON LR.SUBJECT_CODE = S.SUBJECT_CODE
        JOIN
            PROFESSOR P ON LR.USER_NO = P.USER_NO    
        JOIN
            TB_USER U ON P.USER_NO = U.USER_NO         
        LEFT JOIN                                    
            FILE_REF F ON LR.FILE_REF_NO = F.FILE_REF_NO
        WHERE
            LR.USER_NO = #{userNo}              
        ORDER BY
            LR.REQ_DATE DESC, LR.REQ_NO ASC
	</select>

	<insert id="insertLecture">

	</insert>

	<update id="updateLecutre">

	</update>

	<delete id="deleteLecutre">

	</delete>

</mapper>