<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>부경대학교 학생포털 - 메인</title>
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
	rel="stylesheet">
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

body {
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	min-height: 100vh;
	color: #333;
}

.container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 20px;
}

/* Header */
.header {
	background: rgba(255, 255, 255, 0.95);
	backdrop-filter: blur(10px);
	border-radius: 15px;
	padding: 20px 30px;
	margin-bottom: 30px;
	box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
	border: 1px solid rgba(255, 255, 255, 0.18);
}

.header-content {
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.welcome-text h1 {
	color: #2c5aa0;
	font-size: 28px;
	margin-bottom: 5px;
}

.welcome-text p {
	color: #666;
	font-size: 16px;
}

.date-info {
	text-align: right;
	color: #666;
}

.date-info .semester {
	font-weight: 600;
	color: #2c5aa0;
	font-size: 18px;
}

/* Quick Actions */
/* Quick Actions - 가로 일렬 배치 */
.quick-actions {
	display: flex;
	gap: 20px;
	margin-bottom: 30px;
	justify-content: space-between;
}

.quick-action {
	background: rgba(255, 255, 255, 0.95);
	backdrop-filter: blur(10px);
	border-radius: 15px;
	padding: 30px 20px;
	text-align: center;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	cursor: pointer;
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
	border: 1px solid rgba(255, 255, 255, 0.3);
	height: 140px;
	flex: 1;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	text-decoration: none;
	position: relative;
	overflow: hidden;
	min-width: 275px;
}

.quick-action::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: linear-gradient(90deg, #2c5aa0, #667eea);
	transform: scaleX(0);
	transition: transform 0.3s ease;
}

.quick-action:hover {
	transform: translateY(-8px);
	box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
	background: rgba(255, 255, 255, 1);
	text-decoration: none;
}

.quick-action:hover::before {
	transform: scaleX(1);
}

.quick-action:active {
	transform: translateY(-4px);
}

.quick-action i {
	font-size: 36px;
	color: #2c5aa0;
	margin-bottom: 12px;
	transition: all 0.3s ease;
}

.quick-action:hover i {
	color: #667eea;
	transform: scale(1.1);
}

.quick-action h3 {
	color: #333;
	font-size: 17px;
	font-weight: 600;
	margin-bottom: 6px;
	transition: color 0.3s ease;
}

.quick-action:hover h3 {
	color: #2c5aa0;
}

.quick-action p {
	color: #666;
	font-size: 14px;
	font-weight: 500;
	transition: color 0.3s ease;
}

.quick-action:hover p {
	color: #555;
}

/* 반응형 디자인 개선 */
@media ( max-width : 1024px) {
	.quick-actions {
		gap: 15px;
	}
	.quick-action {
		height: 130px;
		padding: 25px 15px;
	}
	.quick-action i {
		font-size: 32px;
		margin-bottom: 10px;
	}
	.quick-action h3 {
		font-size: 16px;
	}
	.quick-action p {
		font-size: 13px;
	}
}

@media ( max-width : 768px) {
	.quick-actions {
		gap: 10px;
	}
	.quick-action {
		height: 120px;
		padding: 20px 10px;
	}
	.quick-action i {
		font-size: 28px;
		margin-bottom: 8px;
	}
	.quick-action h3 {
		font-size: 14px;
		margin-bottom: 4px;
	}
	.quick-action p {
		font-size: 12px;
	}
}

@media ( max-width : 480px) {
	.quick-actions {
		flex-direction: column;
		gap: 15px;
	}
	.quick-action {
		height: 80px;
		padding: 15px;
		flex-direction: row;
		text-align: left;
		justify-content: flex-start;
	}
	.quick-action i {
		font-size: 24px;
		margin-bottom: 0;
		margin-right: 15px;
		flex-shrink: 0;
	}
	.quick-action .content {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
	}
}

/* 접근성 개선 */
.quick-action:focus {
	outline: 2px solid #2c5aa0;
	outline-offset: 2px;
}

.quick-action:focus:not(:focus-visible) {
	outline: none;
}

.quick-action:focus-visible {
	outline: 2px solid #2c5aa0;
	outline-offset: 2px;
}

/* 모바일에서 컨텐츠 래퍼 */
@media ( max-width : 480px) {
	.quick-action-content {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
	}
}

/* Main Content Grid */
.main-content {
	display: grid;
	grid-template-columns: 2fr 1fr;
	gap: 30px;
	margin-bottom: 30px;
}

/* Cards */
.card {
	background: rgba(255, 255, 255, 0.9);
	backdrop-filter: blur(10px);
	border-radius: 15px;
	padding: 25px;
	box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
	border: 1px solid rgba(255, 255, 255, 0.18);
}

.card h2 {
	color: #2c5aa0;
	font-size: 20px;
	margin-bottom: 20px;
	display: flex;
	align-items: center;
	gap: 10px;
}

.card h2 i {
	font-size: 18px;
}

/* Course Cards */
.course-item {
	background: #f8f9ff;
	border-radius: 10px;
	padding: 15px;
	margin-bottom: 15px;
	border-left: 4px solid #2c5aa0;
	transition: all 0.3s ease;
}

.course-item:hover {
	transform: translateX(5px);
	box-shadow: 0 4px 15px rgba(44, 90, 160, 0.1);
}

.course-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	margin-bottom: 10px;
}

.course-title {
	font-weight: 600;
	color: #333;
	font-size: 16px;
}

.course-code {
	color: #666;
	font-size: 14px;
	margin-top: 2px;
}

.course-progress {
	background: #e9ecef;
	border-radius: 10px;
	height: 8px;
	margin-top: 10px;
	overflow: hidden;
}

.course-progress-bar {
	height: 100%;
	background: linear-gradient(90deg, #2c5aa0, #667eea);
	border-radius: 10px;
	transition: width 0.3s ease;
}

/* Schedule */
.schedule-item {
	display: flex;
	align-items: center;
	padding: 12px;
	background: #f8f9ff;
	border-radius: 8px;
	margin-bottom: 10px;
	border-left: 3px solid #2c5aa0;
}

.schedule-time {
	font-weight: 600;
	color: #2c5aa0;
	width: 80px;
	font-size: 14px;
}

.schedule-info {
	flex: 1;
}

.schedule-title {
	font-weight: 500;
	color: #333;
	font-size: 14px;
}

.schedule-location {
	color: #666;
	font-size: 12px;
	margin-top: 2px;
}

/* Academic Status */
.status-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 15px;
	margin-bottom: 20px;
}

.status-item {
	text-align: center;
	padding: 15px;
	background: #f8f9ff;
	border-radius: 10px;
}

.status-value {
	font-size: 24px;
	font-weight: 700;
	color: #2c5aa0;
	margin-bottom: 5px;
}

.status-label {
	color: #666;
	font-size: 14px;
}

/* Notice */
.notice-item {
	padding: 12px;
	border-bottom: 1px solid #eee;
	transition: background 0.3s ease;
	cursor: pointer;
}

.notice-item:hover {
	background: #f8f9ff;
}

.notice-item:last-child {
	border-bottom: none;
}

.notice-title {
	color: #333;
	font-size: 14px;
	margin-bottom: 5px;
	font-weight: 500;
}

.notice-date {
	color: #666;
	font-size: 12px;
}

.notice-badge {
	background: #ff4757;
	color: white;
	padding: 2px 8px;
	border-radius: 12px;
	font-size: 10px;
	margin-left: 8px;
}

.empty-message {
	text-align: center;
	color: #666;
	font-style: italic;
	padding: 20px;
}

/* Responsive */
@media ( max-width : 768px) {
	.main-content {
		grid-template-columns: 1fr;
	}
	.header-content {
		flex-direction: column;
		text-align: center;
		gap: 15px;
	}
	.quick-actions {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 15px;
	}
	.quick-action {
		min-height: 100px;
		padding: 20px 15px;
	}
	.quick-action i {
		font-size: 28px;
		margin-bottom: 8px;
	}
	.quick-action h3 {
		font-size: 14px;
	}
	.quick-action p {
		font-size: 12px;
	}
	.status-grid {
		grid-template-columns: 1fr;
	}
}

@media ( max-width : 480px) {
	.container {
		padding: 10px;
	}
	.quick-actions {
		display: grid; /* ✅ 추가 */
		grid-template-columns: 1fr;
		gap: 12px;
	}
	.quick-action {
		min-height: 90px;
		padding: 18px;
	}
}
</style>
</head>
<body>
	<div class="container">
		<!-- Header -->
		<div class="header">
			<div class="header-content">
				<div class="welcome-text">
					<h1>안녕하세요, ${student.userName}님</h1>
					<p>오늘도 좋은 하루 되세요!</p>
				</div>
				<div class="date-info">
					<div class="semester">${currentSemester}</div>
					<div>
						<fmt:formatDate value="${currentDate}" pattern="yyyy년 MM월 dd일 (E)" />
					</div>
				</div>
			</div>
		</div>

		<!-- Quick Actions -->
		<div class="quick-actions">
			<a href="http://localhost:6060/eclass/lecture/${student.userNo}"
				class="quick-action"> <i class="fas fa-tasks"></i>
				<h3>과제 제출</h3>
				<p>미제출 과제 ${assignmentCount}건</p>
			</a> <a href="/student/grade/history.do" class="quick-action"> <i
				class="fas fa-chart-bar"></i>
				<h3>성적 조회</h3>
				<p>${gradeStatus}</p>
			</a> <a href="/student/lecture/enroll.do" class="quick-action"> <i
				class="fas fa-calendar-plus"></i>
				<h3>수강신청</h3>
				<p>${registrationStatus}</p>
			</a> <a href="/student/library" class="quick-action"> <i
				class="fas fa-book"></i>
				<h3>도서관</h3>
				<p>대출 도서 ${borrowedBookCount}권</p>
			</a>
		</div>

		<!-- Main Content -->
		<div class="main-content">
			<!-- Left Column -->
			<div class="left-column">
				<!-- Current Courses -->
				<div class="card">
					<h2>
						<i class="fas fa-graduation-cap"></i>수강 중인 과목
					</h2>
					<c:choose>
						<c:when test="${not empty currentCourses}">
							<c:forEach var="course" items="${currentCourses}">
								<div class="course-item">
									<div class="course-header">
										<div>
											<a
												href="http://localhost:6060/eclass/lecture/${student.userNo }/${course.lecNo }/assignment">
												<div class="course-title">${course.lectureReq.lecName}</div>
											</a>
											<div class="course-code">${course.professorName}</div>
										</div>
									</div>
								</div>
							</c:forEach>
						</c:when>
						<c:otherwise>
							<div class="empty-message">수강 중인 과목이 없습니다.</div>
						</c:otherwise>
					</c:choose>
				</div>

				<!-- Today's Schedule -->
				<div class="card">
					<h2>
						<i class="fas fa-calendar-day"></i>오늘의 일정
					</h2>
					<c:choose>
						<c:when test="${not empty todaySchedule}">
							<c:forEach var="schedule" items="${todaySchedule}">
								<div class="schedule-item">
									<div class="schedule-time">${schedule.startTime}</div>
									<div class="schedule-info">
										<div class="schedule-title">${schedule.scheduleTitle}</div>
									</div>
								</div>
							</c:forEach>
						</c:when>
						<c:otherwise>
							<div class="empty-message">오늘 일정이 없습니다.</div>
						</c:otherwise>
					</c:choose>
				</div>
			</div>

			<!-- Right Column -->
			<div class="right-column">
				<!-- Academic Status -->
				<div class="card">
					<h2>
						<i class="fas fa-chart-line"></i>학업 현황
					</h2>
					<div class="status-grid">
						<div class="status-item">
							<div class="status-value">
								<fmt:formatNumber value="${academicStatus.gpa}" pattern="0.00" />
							</div>
							<div class="status-label">평균 학점</div>
						</div>
						<div class="status-item">
							<div class="status-value">${academicStatus.totalCredits}</div>
							<div class="status-label">취득 학점</div>
						</div>
					</div>
					<div class="status-grid">
						<div class="status-item">
							<div class="status-value">${academicStatus.currentSemesterCredits}</div>
							<div class="status-label">이번학기</div>
						</div>
						<div class="status-item">
							<div class="status-value">${academicStatus.graduationProgress}%</div>
							<div class="status-label">졸업 진도</div>
						</div>
					</div>
				</div>

				<!-- Recent Notices -->
				<div class="card">
					<h2>
						<i class="fas fa-bell"></i>최근 공지사항
					</h2>
					<c:choose>
						<c:when test="${not empty recentNotices}">
							<c:forEach var="notice" items="${recentNotices}">
								<div class="notice-item"
									onclick="location.href='/student/notice/${notice.boardNo}'">
									<div class="notice-title">${notice.boardTitle}</div>
									<div class="notice-date">${notice.postDate}</div>
								</div>
							</c:forEach>
						</c:when>
						<c:otherwise>
							<div class="empty-message">최근 공지사항이 없습니다.</div>
						</c:otherwise>
					</c:choose>
				</div>
			</div>
		</div>
	</div>

	<script>
        // 간단한 인터랙션 효과
        document.querySelectorAll('.quick-action').forEach(action => {
            action.addEventListener('click', function(e) {
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
            });
        });

        // 진행률 애니메이션
        window.addEventListener('load', function() {
            document.querySelectorAll('.course-progress-bar').forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 500);
            });
        });
    </script>
</body>
</html>