<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
<title>비교과 프로그램 관리</title>
<link rel="stylesheet" href="/dist/assets/css/bodyFormat.css" />
<style>

.container {
	max-width: 1000px;
	margin: 0 auto;
	padding: 2rem;
}

.summary-grid {
	display: flex;
	flex-wrap: wrap;
	gap: 1rem;
	margin-bottom: 2rem;
}

.summary-grid>div {
	flex: 1;
	background: #fff;
	padding: 1rem;
	border: 1px solid #ddd;
	border-radius: 0.5rem;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
	text-align: center;
}

.summary-grid span {
	display: block;
	margin-top: 0.5rem;
	font-size: 1.2rem;
	font-weight: bold;
	color: #2b77ef;
}

.tab-menu {
	display: flex;
	gap: 0.5rem;
	margin-bottom: 1.5rem;
}

.tab-menu button {
	padding: 0.5rem 1rem;
	background: #e9ecef;
	border: none;
	border-radius: 1.5rem;
	cursor: pointer;
	font-weight: 500;
}

.tab-menu button.active {
	background: #2b77ef;
	color: white;
}

.add-button {
	text-align: right;
	margin-bottom: 1rem;
}

.btn-add {
	background: #2b77ef;
	color: white;
	padding: 0.5rem 1rem;
	border: none;
	border-radius: 0.5rem;
	cursor: pointer;
	font-size: 1rem;
}

table {
	width: 100%;
	border-collapse: collapse;
	background-color: white;
	border: 1px solid #dee2e6;
}

table th, table td {
	padding: 0.75rem;
	text-align: center;
	border-bottom: 1px solid #dee2e6;
}

table th {
	background-color: #f1f3f5;
	font-weight: 600;
}

table td a {
	margin: 0 0.25rem;
	text-decoration: none;
	font-size: 1.1rem;
}

#programModal {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background: rgba(0, 0, 0, 0.2); /* 회색 반투명 배경 */
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 1000;
}

.modal-box {
	background: white;
	padding: 2rem;
	width: 400px;
	border: 2px solid #ccc;
	border-radius: 0.5rem;
}

.stat-update-time {
  font-size: 0.9rem;
  color: #888;
  text-align: right;
  margin-bottom: 0.5rem;
}
</style>
<script>
	function openModal() {
		document.getElementById("programModal").style.display = "flex";
	}

	function closeModal() {
		document.getElementById("programModal").style.display = "none";
	}
</script>

</head>
<body>
	<div class="container">
		<h1>비교과 프로그램 관리 시스템</h1>
		<p class="stat-update-time">
			마지막 갱신 시각: <strong>${stat.regDate}</strong>
		</p>


		<div class="summary-grid">
			<div>
				전체 프로그램<span>${stat.totalPrograms }</span>
			</div>
			<div>
				총 참여자 수<span>${stat.totalApplicants }</span>
			</div>
			<div>
				이번 달 신청 수<span>${stat.monthlyApply }</span>
			</div>
			<div>
				완료율<span>${stat.completeRate }%</span>
			</div>
		</div>

		<div class="tab-menu">
			<button class="active">프로그램 관리</button>
			<button>신청 관리</button>
			<button>사후 관리</button>
			<button>통계 분석</button>
			<button>설문 관리</button>
		</div>

		<div class="add-button">
			<button type="button" class="btn-add" onclick="openModal()">새
				프로그램 추가</button>
		</div>

		<table>
			<thead>
				<tr>
					<th>프로그램명</th>
					<th>기간</th>
					<th>상태</th>
					<th>유형</th>
					<th>정원</th>
					<th>장소</th>
				</tr>
			</thead>
			<tbody>
				<c:forEach var="p" items="${programList}">
					<tr>
						<td>${p.programTitle}</td>
						<td>${p.startDate}~${p.endDate}</td>
						<td><c:choose>
								<c:when test="${p.programActive eq 'N'}">
									모집중
								</c:when>
								<c:when test="${p.programActive eq 'Y'}">
									진행중
								</c:when>
								<c:otherwise>
									완료
								</c:otherwise>
							</c:choose></td>
						<td>${p.type.typeName }</td>
						<td>${p.programCapacity }</td>
						<td>${p.place }</td>
					</tr>
				</c:forEach>
			</tbody>
		</table>
	</div>


	<!-- 모달 외곽 전체 -->
	<div id="programModal" style="display: none;">
		<!-- 모달 박스 내부 -->
		<div class="modal-box">
			<h2 class="form-title">프로그램 추가</h2>
			<form id="programForm">
				<!-- 제목 -->
				<div class="form-group">
					<label for="programTitle">제목</label> 
					<input type="text" id="programTitle" name="programTitle" class="form-control" />
				</div>

				<!-- 설명 -->
				<div class="form-group">
					<label for="description">설명</label>
					<textarea id="description" name="programDesp" class="form-control"></textarea>
				</div>

				<!-- 정원 -->
				<div class="form-group">
					<label for="capacity">정원</label> 
					<input type="number" id="capacity" name="programCapacity" class="form-control" />
				</div>

				<!-- 시작일 -->
				<div class="form-group">
					<label for="startDate">시작일</label> 
					<input type="date" id="startDate" name="startDate" class="form-control" />
				</div>

				<!-- 종료일 -->
				<div class="form-group">
					<label for="endDate">종료일</label> 
					<input type="date" id="endDate" name="endDate" class="form-control" />
				</div>

				<!-- 장소 -->
				<div class="form-group">
					<label for="place">장소</label> 
					<input type="text" id="place" name="place" class="form-control" />
				</div>

				<!-- 카테고리 (TYPE_CODE) -->
				<div class="form-group">
					<label for="typeCode">카테고리</label> <select id="typeCode"
						name="typeCode" class="form-control">
						<option value="">선택</option>
						<option value="LDR">리더십</option>
						<option value="ENT">창업</option>
						<option value="TEC">기술</option>
						<option value="LAN">어학</option>
					</select>
				</div>

				<!-- 활성상태 -->
				<div class="form-group">
					<label>활성 상태</label>
					<div>
						<label><input type="radio" name="programActive" value="N" />
							모집중</label> <label><input type="radio" name="programActive"
							value="Y" /> 진행중</label> <label><input type="radio"
							name="programActive" value="C" /> 완료</label>
					</div>
				</div>

				<!-- 담당자 USER_NO -->
				<input type="hidden" name="userNo" value="${loginUser.userNo}" />

				<!-- 버튼 -->
				<div class="form-group btn-group">
					<button type="button" class="deleteButton" onclick="closeModal()">닫기</button>
					<button type="submit" class="submitButton">등록</button>
				</div>
			</form>

		</div>
	</div>



</body>
</html>



