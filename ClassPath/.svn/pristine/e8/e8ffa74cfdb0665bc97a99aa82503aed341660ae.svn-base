<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper 
	namespace="kr.or.ddit.pfcp.staff.program.mapper.StaffProgramMapper">
	<resultMap id="programMap" type="kr.or.ddit.pfcp.common.vo.ProgramVO">
    <id property="programNo" column="PROGRAM_NO"/>
    <result property="userNo" column="USER_NO"/>
    <result property="typeCode" column="TYPE_CODE"/>
    <result property="programTitle" column="PROGRAM_TITLE"/>
    <result property="programDesp" column="PROGRAM_DESP"/>
    <result property="programCapacity" column="PROGRAM_CAPACITY"/>
    <result property="startDate" column="START_DATE"/>
    <result property="endDate" column="END_DATE"/>
    <result property="place" column="PLACE"/>
    <result property="programActive" column="PROGRAM_ACTIVE"/>

    <!-- TypeVO 조인 정보 매핑 -->
    <association property="type" javaType="kr.or.ddit.pfcp.common.vo.TypeVO">
        <result property="typeCode" column="TYPE_CODE"/>
        <result property="typeName" column="TYPE_NAME"/>
        <result property="typeGroup" column="TYPE_GROUP"/>
        <result property="isActive" column="IS_ACTIVE"/>
    </association>
</resultMap>
<!--프로그램 목록 조회  -->
<select id="selectProgramList" resultType="kr.or.ddit.pfcp.common.vo.ProgramVO">
    SELECT 
        P.PROGRAM_NO
        , P.TYPE_CODE
        , P.PROGRAM_TITLE
        , P.PROGRAM_DESP
        , P.PROGRAM_CAPACITY
        , P.START_DATE
        , P.END_DATE
        , P.PLACE
        , P.PROGRAM_ACTIVE
        , P.USER_NO
        , T.TYPE_CODE
        , T.TYPE_NAME
        , T.TYPE_GROUP
        , T.IS_ACTIVE
    FROM PROGRAM P
    LEFT JOIN TYPE T ON P.TYPE_CODE = T.TYPE_CODE
    WHERE T.TYPE_GROUP = 'PROGRAM'
    ORDER BY P.START_DATE DESC
</select>

<!--프로그램 단건 상세 조회  -->
<select id="selectProgramById" parameterType="string" resultMap="programMap">
    SELECT 
        P.PROGRAM_NO,
        P.TYPE_CODE,
        P.PROGRAM_TITLE,
        P.PROGRAM_DESP,
        P.PROGRAM_CAPACITY,
        P.START_DATE,
        P.END_DATE,
        P.PLACE,
        P.PROGRAM_ACTIVE,
        P.USER_NO,
        T.TYPE_CODE,
        T.TYPE_NAME,
        T.TYPE_GROUP,
        T.IS_ACTIVE

    FROM PROGRAM P
    LEFT JOIN TYPE T ON P.TYPE_CODE = T.TYPE_CODE
    WHERE P.PROGRAM_NO = #{programNo}
</select>

<select id="selectProgramType" resultType="kr.or.ddit.pfcp.common.vo.TypeVO">
	SELECT 
		TYPE_CODE
		, TYPE_NAME
		, IS_ACTIVE
		, TYPE_GROUP
	FROM TYPE
	WHERE TYPE_GROUP='PROGRAM'
</select>

</mapper>