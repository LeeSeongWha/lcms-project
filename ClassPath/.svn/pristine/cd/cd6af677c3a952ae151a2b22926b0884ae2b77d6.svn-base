<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<title>Insert title here</title>
<link rel="stylesheet" href="/dist/assets/css/bodyFormat.css">

<script src="https://cdn.iamport.kr/v1/iamport.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", () => {
	    var IMP = window.IMP;
	    
	    IMP.init("imp31705713");
	});
	
	function requestPay() {
		const certName = "${certificateInfo.certName}";
        const amount = ${certificateInfo.issueFee};
        
	    IMP.request_pay({
	        pg: "kakaopay.TC0ONETIME",
	        pay_method: "card",
	        merchant_uid: Date.now().toString(),
	        name: certName,
	        amount: amount,
	        buyer_email: "good@portone.io",
	        buyer_name: "í¬íŠ¸ì› ê¸°ìˆ ì§€ì›íŒ€",
	        buyer_tel: "010-1234-5678",
	        buyer_addr: "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™",
	        buyer_postcode: "123-456"
	    }, function (rsp) {
	        if (rsp.success) {
	            const path = window.location.pathname; 
                const certCode = path.split("/").pop().replace(".do", "");
                
	            axios.post("/student/certificate/paymentComplete", {
		                imp_uid: rsp.imp_uid,
		                merchant_uid: rsp.merchant_uid,
		                certCode: certCode 
		            }, 
		            { 
						responseType: 'arraybuffer' 
					}
	            ).then(res => {
	                const blob = new Blob(
	                	[res.data], 
	                	{ 
							type: 'application/pdf' 
						}
	                );
	                const url = URL.createObjectURL(blob);
	                
	                window.open(url, "_blank");
	            })
	            .catch(err => {
	                console.error("ì„œë²„ ìš”ì²­ ì‹¤íŒ¨", err);
	                
	                alert("ì„œë²„ ê²°ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
	            });
	        } else {
	            alert("ê²°ì œ ì‹¤íŒ¨: " + rsp.error_msg);
	        }
	    });
	}
</script>


<style>
.section {
  max-width: 1400px; /* ë” ë„“ê²Œ */
  margin: 10px auto;
  padding: 32px;
  background-color: #fefefe;
  border: 1px solid #e0e0e0;
  border-radius: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  font-family: "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
  line-height: 1.6;
}

/* ì œëª© */
.section h5 {
  font-size: 26px;
  font-weight: bold;
  color: #333;
  text-align: center;
  position: relative;
  display: inline-block;
  border-bottom: 4px solid #fee500;
  padding: 4px 12px;
  border-radius: 8px;
  margin: 0 auto 24px auto;
}

/* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
.section p {
  font-size: 17px;
  color: #555;
  margin-bottom: 12px;
}

/* 2ì—´ ì •ë³´ ê·¸ë¦¬ë“œ */
.info-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 5px 40px;
  margin-bottom: 15px;
}

/* ì‹ ì²­ì ˆì°¨ + ìœ ì˜ì‚¬í•­ ë‚˜ë€íˆ */
.flex-row {
  display: flex;
  gap: 32px;
  justify-content: space-between;
  margin-bottom: 32px;
}

/* ê³µí†µ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
.notice-box {
  flex: 1;
  background-color: #f9f9f9;
  border-left: 4px solid #fee500;
  padding: 20px;
  border-radius: 10px;
  font-size: 15px;
  color: #444;
}

/* ëª©ë¡ ìŠ¤íƒ€ì¼ */
.notice-box ul, .notice-box ol {
  padding-left: 20px;
  margin-top: 8px;
}

/* FAQ ë°•ìŠ¤ */
.faq-box {
  background-color: #f1f1f1;
  padding: 20px;
  border-radius: 10px;
  font-size: 15px;
  margin-bottom: 32px;
  color: #444;
}

/* ê²°ì œ ì˜ì—­ */
#certificate {
  background-color: #fafafa;
  padding: 24px;
  border-radius: 14px;
  border: 1px dashed #ddd;
  text-align: center;
}

/* ê²°ì œ ë²„íŠ¼ */
#certificate button {
  margin-top: 8px;
  background-color: #fee500;
  color: #3c1e1e;
  border: none;
  border-radius: 8px;
  padding: 14px 30px;
  font-size: 17px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: background-color 0.2s;
}

#certificate button:hover {
  background-color: #ffef3a;
}
</style>

<div class="section">
	<div style="text-align: center;">
		<h5>${certificateInfo.certName}ì‹ ì²­</h5>
	</div>

	<!-- ì •ë³´ ê·¸ë¦¬ë“œ -->
	<div class="info-grid">
		<p>
			<strong>Â· ì¦ëª…ì„œ ì¢…ë¥˜:</strong> ${certificateInfo.certName}
		</p>
		<p>
			<strong>Â· ë°œê¸‰ ë¹„ìš©:</strong> ${certificateInfo.issueFee}ì›
		</p>
		<p>
			<strong>Â· ì²˜ë¦¬ ì†Œìš” ì‹œê°„:</strong> ì‹ ì²­ í›„ 1~2ì¼ ì´ë‚´ ë°œê¸‰
		</p>
		<p>
			<strong>Â· ë°œê¸‰ ë°©ì‹:</strong> PDF ë‹¤ìš´ë¡œë“œ ë˜ëŠ” í–‰ì •ì‹¤ ì§ì ‘ ìˆ˜ë ¹
		</p>
	</div>

	<!-- ì ˆì°¨ì™€ ìœ ì˜ì‚¬í•­: ê°€ë¡œ ì •ë ¬ -->
	<div class="flex-row">
		<div class="notice-box">
			<p>
				<strong>ğŸ“Œ ì‹ ì²­ ì ˆì°¨ ì•ˆë‚´</strong>
			</p>
			<ol>
				<li>1ë‹¨ê³„: ë°œê¸‰ ì‹ ì²­ ì •ë³´ í™•ì¸</li>
				<li>2ë‹¨ê³„: ê²°ì œ ì™„ë£Œ</li>
				<li>3ë‹¨ê³„: ì¦ëª…ì„œ ì²˜ë¦¬ ë° ë°œê¸‰</li>
				<li>4ë‹¨ê³„: ì•Œë¦¼ ë˜ëŠ” ì´ë©”ì¼ë¡œ ìˆ˜ë ¹ ì•ˆë‚´</li>
			</ol>
		</div>

		<div class="notice-box">
			<p>
				<strong>âš ï¸ ìœ ì˜ì‚¬í•­</strong>
			</p>
			<ul>
				<li>ì…ë ¥í•œ ì •ë³´ê°€ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ê²½ìš°, ë°œê¸‰ì´ ì§€ì—°ë˜ê±°ë‚˜ ê±°ë¶€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
				<li>ê²°ì œ ì™„ë£Œ í›„ì—ëŠ” <strong>í™˜ë¶ˆì´ ë¶ˆê°€</strong>í•˜ì˜¤ë‹ˆ ë°˜ë“œì‹œ í™•ì¸ í›„ ê²°ì œí•´ ì£¼ì„¸ìš”.
				</li>
				<li>ë°œê¸‰ ì™„ë£Œ í›„, ë§ˆì´í˜ì´ì§€ > ì¦ëª…ì„œ ë‚´ì—­ì—ì„œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
				<li>ì¶œë ¥ìš© PDFëŠ” QRì½”ë“œ ë° ì¸ì¦ ì½”ë“œë¡œ ì§„ìœ„ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
			</ul>
		</div>
	</div>

	<!-- FAQ -->
	<div class="faq-box">
		<p>
			<strong>â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</strong>
		</p>
		<p>
			<strong>Q.</strong> ê²°ì œ í›„ ì–¸ì œ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?<br> <strong>A.</strong>
			ì¼ë°˜ì ìœ¼ë¡œ 1~2ì¼ ì´ë‚´ ì²˜ë¦¬ë˜ë©°, ì™„ë£Œ ì‹œ ë¬¸ì ë˜ëŠ” ì´ë©”ì¼ë¡œ ì•Œë¦¼ì„ ë“œë¦½ë‹ˆë‹¤.
		</p>

		<p>
			<strong>Q.</strong> ì§ì ‘ ìˆ˜ë ¹ë„ ê°€ëŠ¥í•œê°€ìš”?<br> <strong>A.</strong> ë„¤, ì‹ ì²­
			ì‹œ 'ì§ì ‘ ìˆ˜ë ¹'ì„ ì„ íƒí•˜ë©´ í–‰ì •ì‹¤ì—ì„œ ìˆ˜ë ¹ ê°€ëŠ¥í•©ë‹ˆë‹¤.
		</p>

		<p>
			<strong>Q.</strong> ì˜ë¬¸ ì¦ëª…ì„œë„ ë°œê¸‰ë˜ë‚˜ìš”?<br> <strong>A.</strong> ë„¤, ì˜ë¬¸
			ë°œê¸‰ ê°€ëŠ¥ ì—¬ë¶€ëŠ” ê° ì¦ëª…ì„œ ìƒì„¸ì •ë³´ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.
		</p>
	</div>

	<!-- ê²°ì œ ë²„íŠ¼ -->
	<div id="certificate">
		<button type="button" onclick="requestPay()">ê²°ì œí•˜ê¸°</button>
	</div>
</div>


<!-- <script src="/js/app/pfcp/student/studentPayment.js"></script> -->